{% extends 'base.html' %}
{% block content %}


  <div class="bd-pageheader">
    <div class="container">
      <h1>What is AI Playground?</h1>
      <p class="lead mb-2">AI Playground is a platform where you can compete with the most brilliant artificial brains all over the world. You can also challenge AI with your own human brains. It will be more interesting than you think about. Come on! QAQ</p>
      <div class="row pt-2">
        <form class="form" id="user_form">
          {% csrf_token %}
          <div class="col-lg-4">
            <div class="form-group"><input class="form-control form-control-lg" name="username" type="text" placeholder="Username"></div>
          </div>
          <div class="col-lg-4">
            <div class="form-group"><input class="form-control form-control-lg" name="password" type="password" placeholder="Password"></div>
          </div>
        </form>
        <div class="col-sm-6 col-lg-2">
          <div class="form-group"><button class="btn btn-lg btn-primary btn-block" id="main_register">Register</button></div>
        </div>
        <div class="col-sm-6 col-lg-2">
          <div class="form-group"><button class="btn btn-lg btn-secondary btn-block" id="main_login">Login</button></div>
        </div>
      </div>
      <div class="alert alert-danger" style="display:none" id="user_error_message" role="alert"></div>
      <div class="alert alert-success" style="display:none" id="user_success_message" role="alert"></div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-4"><div class="jumbotron bg-faded">
      <h2>Contest</h2>
      <p class="lead">Submit your AI program and compete!</p>
      <a class="btn btn-primary btn-block mb-2" href="{% url 'problist' %}" role="button">Try it &raquo;</a>
    </div></div>

    <div class="col-md-4"><div class="jumbotron bg-faded">
      <h2>Challenge</h2>
      <p class="lead">Are you more clever than those dumb programs?</p>
      <a class="btn btn-primary btn-block mb-2" href="challenge.php" role="button">Beat it &raquo;</a>
    </div></div>

    <div class="col-md-4"><div class="jumbotron bg-faded">
      <h2>Headline</h2>
      <p class="lead"><strong>[UPD 1 hour ago]</strong> zerol's program has successfully defeated ultmaster, the champion of Gobang. Orz!</p>
      <a class="btn btn-primary btn-block mb-2" href="status.php" role="button">More news in the air &raquo;</a>
    </div></div>
  </div>

{% endblock %}

{% block script %}
    <script>
        function show_message(json) {
            var user_error_message = $('#user_error_message');
            var user_success_message = $('#user_success_message');
            if (json['error'] == 1) {
                user_success_message.hide();
                user_error_message.html(json['message']);
                user_error_message.show(500);
            } else {
                user_error_message.hide();
                user_success_message.html(json['message']);
                user_success_message.show(500);
                setTimeout(function() { location.reload(); }, 3000);
            }
        }

        $(document).ready(function() {
            $('#main_login').click(function() {
                //alert('Hello');
                var data = $('#user_form').serialize();
                $.getJSON("{% url 'login' %}", data, function(json) {
                    show_message(json);
                    $('#main_login').blur();
                });
            });
            $('#main_register').click(function() {
                var data = $('#user_form').serialize();
                $.getJSON("{% url 'register' %}", data, function(json) {
                    show_message(json);
                    $('#main_register').blur();
                });
            });

        });
    </script>

{% endblock %}